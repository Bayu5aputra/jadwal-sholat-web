---
import { getDoaList, getDoaSlug } from '../../lib/doa';
import { Card } from '@eliancodes/brutal-ui';
import { Button } from '@eliancodes/brutal-ui';

interface Props {
  count?: number;
}

const { count } = Astro.props;

const doaList = await getDoaList();
const recentDoa = doaList.slice(0, count ?? 3);
---

<section class='mt-8'>
  <Card>
    <div class='flex justify-between items-start'>
      <h2 class='text-2xl md:text-4xl lg:text-6xl mb-8 dm-serif'>
        Doa Pilihan
      </h2>
      <div class='hidden md:block'>
        <Button href='/doa/'>Lihat semua doa &rarr;</Button>
      </div>
      <div class='block md:hidden'>
        <Button href='/doa/'>Semua doa</Button>
      </div>
    </div>
    <ul class='grid md:grid-cols-2 lg:grid-cols-3 gap-8'>
      {
        recentDoa.map((item) => (
          <li class='doa-item'>
            <h3 class='dm-serif text-2xl'>{item.doa}</h3>
            {item.latin && <p class='outfit mt-2 text-base'>{item.latin}</p>}
            {item.artinya && <p class='poppins mt-2 text-sm'>{item.artinya}</p>}
            <div class='mt-4'>
              <Button href={`/doa/${getDoaSlug(item)}/`}>Lihat doa &rarr;</Button>
            </div>
          </li>
        ))
      }
    </ul>
  </Card>
</section>

<style>
  .doa-item {
    border: 3px solid #000;
    background: #fff;
    padding: 1rem;
    box-shadow: 5px 5px 0 #000;
  }
</style>
